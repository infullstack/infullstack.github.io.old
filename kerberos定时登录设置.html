<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="I am a full stack engineer, working on big data."><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>kerberos定时登录设置</title><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar-min.png"></div><div class="author"><div class="author-name"><a href="/">Ray</a></div><div class="about-me">Halo~ ，Just a Product Manager Blog</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">归档</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar-min.png"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/infullstack"></span><a href="https://github.com/infullstack" target="_blank" title="https://github.com/infullstack">https://github.com/infullstack</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="infullstack@163.com"></span><span>infullstack@163.com</span></li><li class="social-item"><span class="label"><img src="/images/socials/wechat.svg" alt="onlyyanlei"></span><span>onlyyanlei</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">kerberos定时登录设置</div><div class="date">写于2018年01月16日</div><div class="content"><h5 id="1-增加Crontab定时任务"><a href="#1-增加Crontab定时任务" class="headerlink" title="1. 增加Crontab定时任务"></a>1. 增加Crontab定时任务</h5><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 定时每小时20分执行一次，同时输出执行日志</span><br><span class="line">20 * * * * sh /user/kylin/kerberos_init.sh &gt;&gt; /user/kylin/kerberos_init.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<h5 id="2-脚本"><a href="#2-脚本" class="headerlink" title="2.脚本"></a>2.脚本</h5><ul>
<li>kerberos_init.sh脚本</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 引入Fusioninght客户端变量，CDH不需要这步</span><br><span class="line">source /opt/hadoop_client/bigdata_env</span><br><span class="line">## 引入变量</span><br><span class="line">source /user/root/krb5.sh</span><br><span class="line">## 登录kerberos</span><br><span class="line">kinit kylin &lt;&lt;EOF</span><br><span class="line">kylin</span><br><span class="line">EOF</span><br><span class="line">klist</span><br></pre></td></tr></table></figure>
<ul>
<li>krb5.sh脚本</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line"># 设置kerberos认证缓存目录</span><br><span class="line">export KRB5CCNAME=/user/kylin/krb5_cache</span><br></pre></td></tr></table></figure>
<h5 id="3-环境变量-可选"><a href="#3-环境变量-可选" class="headerlink" title="3. 环境变量(可选)"></a>3. 环境变量(可选)</h5><ul>
<li>增加KRB5CCNAME变量到用户环境</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 编辑~/.bashrc增加一行</span><br><span class="line">source /user/root/krb5.sh</span><br></pre></td></tr></table></figure></div><div class="tags"><a class="tag-link" href="/tags/crontab/">crontab</a><a class="tag-link" href="/tags/kerberos/">kerberos</a><a class="tag-link" href="/tags/linux/">linux</a></div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/ycsb使用指南.html">ycsb使用指南</a></li><li>下一篇：<a href="/hello-hexo.html">Hello Hexo</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by </span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-curry" target="_blank">Curry</a><span>.</span></div></footer><script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><link href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet"><script type="text/javascript" src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="/script/index.js"></script><script type="text/javascript" src="https://cdn.bootcss.com/instantclick/3.1.0/instantclick.min.js"></script><script type='text/javascript' data-no-instant>InstantClick.init();</script><script src="/script/post.js"></script></body></html>